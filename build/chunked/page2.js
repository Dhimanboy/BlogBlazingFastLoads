Ext.define("Ext.dataview.component.DataItem",{extend:Ext.Container,xtype:"dataitem",config:{baseCls:Ext.baseCSSPrefix+"data-item",defaultType:"component",record:null,itemCls:null,dataMap:{},dataview:null,width:"100%",items:[{xtype:"component"}]},updateBaseCls:function(a,b){this.callParent(arguments)},updateItemCls:function(a,b){b&&this.removeCls(b);a&&this.addCls(a)},doMapData:function(a,b,c){var d,e,f,g;for(d in a)if(f=a[d],e=this[d]())for(g in f)if(b&&e[g]&&void 0!==b[f[g]]&&null!==b[f[g]])e[g](b[f[g]]);
c&&c.updateData(b)},updateRecord:function(a){if(a){this._record=a;var b=this.dataview||this.getDataview();a=b.prepareData(a.getData(!0),b.getStore().indexOf(a),a);var b=this.getItems().first(),c=this.getDataMap();b&&(c&&this.doMapData(c,a,b),this.fireEvent("updatedata",this,a))}}});
Ext.define("Ext.dataview.component.Container",{extend:Ext.Container,constructor:function(){this.itemCache=[];this.callParent(arguments)},doInitialize:function(){this.innerElement.on({touchstart:"onItemTouchStart",touchend:"onItemTouchEnd",tap:"onItemTap",taphold:"onItemTapHold",touchmove:"onItemTouchMove",singletap:"onItemSingleTap",doubletap:"onItemDoubleTap",swipe:"onItemSwipe",delegate:"\x3e ."+Ext.baseCSSPrefix+"data-item",scope:this})},initialize:function(){this.callParent();this.doInitialize()},
onItemTouchStart:function(a){var b=a.getTarget(),b=Ext.getCmp(b.id);b.on({touchmove:"onItemTouchMove",scope:this,single:!0});this.fireEvent("itemtouchstart",this,b,this.indexOf(b),a)},onItemTouchMove:function(a){var b=a.getTarget(),b=Ext.getCmp(b.id);this.fireEvent("itemtouchmove",this,b,this.indexOf(b),a)},onItemTouchEnd:function(a){var b=a.getTarget(),b=Ext.getCmp(b.id);b.un({touchmove:"onItemTouchMove",scope:this});this.fireEvent("itemtouchend",this,b,this.indexOf(b),a)},onItemTap:function(a){var b=
a.getTarget(),b=Ext.getCmp(b.id);this.fireEvent("itemtap",this,b,this.indexOf(b),a)},onItemTapHold:function(a){var b=a.getTarget(),b=Ext.getCmp(b.id);this.fireEvent("itemtaphold",this,b,this.indexOf(b),a)},onItemSingleTap:function(a){var b=a.getTarget(),b=Ext.getCmp(b.id);this.fireEvent("itemsingletap",this,b,this.indexOf(b),a)},onItemDoubleTap:function(a){var b=a.getTarget(),b=Ext.getCmp(b.id);this.fireEvent("itemdoubletap",this,b,this.indexOf(b),a)},onItemSwipe:function(a){var b=a.getTarget(),b=
Ext.getCmp(b.id);this.fireEvent("itemswipe",this,b,this.indexOf(b),a)},moveItemsToCache:function(a,b){for(var c=this.dataview,d=c.getMaxItemCache(),e=this.getViewItems(),f=this.itemCache,g=f.length,h=c.getPressedCls(),c=c.getSelectedCls(),j=b-a,k;0<=j;j--)k=e[a+j],g!==d?(this.remove(k,!1),k.removeCls([h,c]),f.push(k),g++):k.destroy();0==this.getViewItems().length&&this.dataview.showEmptyText()},moveItemsFromCache:function(a){var b=this.dataview,c=b.getStore(),d=a.length,e=b.getDefaultType(),f=b.getItemConfig(),
g=this.itemCache,h=g.length,j;d&&b.hideEmptyText();for(b=0;b<d;b++)a[b]._tmpIndex=c.indexOf(a[b]);Ext.Array.sort(a,function(a,b){return a._tmpIndex>b._tmpIndex?1:-1});for(b=0;b<d;b++)j=a[b],h?(h--,c=g.pop(),this.updateListItem(j,c)):c=this.getDataItemConfig(e,j,f),c=this.insert(j._tmpIndex,c),delete j._tmpIndex;return[]},getViewItems:function(){return this.getInnerItems()},updateListItem:function(a,b){b.updateRecord&&(b.getRecord()===a?b.updateRecord(a):b.setRecord(a))},getDataItemConfig:function(a,
b,c){var d=this.dataview;a={xtype:a,record:b,itemCls:d.getItemCls(),defaults:c,dataview:d};return Ext.merge(a,c)},doRemoveItemCls:function(a){for(var b=this.getViewItems(),c=b.length,d=0;d<c;d++)b[d].removeCls(a)},doAddItemCls:function(a){for(var b=this.getViewItems(),c=b.length,d=0;d<c;d++)b[d].addCls(a)},updateAtNewIndex:function(a,b,c){this.moveItemsToCache(a,a);this.moveItemsFromCache([c])},destroy:function(){for(var a=this.itemCache,b=a.length,c=0;c<b;c++)a[c].destroy();this.callParent()}});
Ext.define("Ext.dataview.element.Container",{extend:Ext.Component,doInitialize:function(){this.element.on({touchstart:"onItemTouchStart",touchend:"onItemTouchEnd",tap:"onItemTap",taphold:"onItemTapHold",touchmove:"onItemTouchMove",singletap:"onItemSingleTap",doubletap:"onItemDoubleTap",swipe:"onItemSwipe",delegate:"\x3e div",scope:this})},initialize:function(){this.callParent();this.doInitialize()},updateBaseCls:function(a,b){this.callParent([a+"-container",b])},onItemTouchStart:function(a){var b=
a.getTarget(),c=this.getViewItems().indexOf(b);Ext.get(b).on({touchmove:"onItemTouchMove",scope:this,single:!0});this.fireEvent("itemtouchstart",this,Ext.get(b),c,a)},onItemTouchEnd:function(a){var b=a.getTarget(),c=this.getViewItems().indexOf(b);Ext.get(b).un({touchmove:"onItemTouchMove",scope:this});this.fireEvent("itemtouchend",this,Ext.get(b),c,a)},onItemTouchMove:function(a){var b=a.getTarget(),c=this.getViewItems().indexOf(b);this.fireEvent("itemtouchmove",this,Ext.get(b),c,a)},onItemTap:function(a){var b=
a.getTarget(),c=this.getViewItems().indexOf(b);this.fireEvent("itemtap",this,Ext.get(b),c,a)},onItemTapHold:function(a){var b=a.getTarget(),c=this.getViewItems().indexOf(b);this.fireEvent("itemtaphold",this,Ext.get(b),c,a)},onItemDoubleTap:function(a){var b=a.getTarget(),c=this.getViewItems().indexOf(b);this.fireEvent("itemdoubletap",this,Ext.get(b),c,a)},onItemSingleTap:function(a){var b=a.getTarget(),c=this.getViewItems().indexOf(b);this.fireEvent("itemsingletap",this,Ext.get(b),c,a)},onItemSwipe:function(a){var b=
a.getTarget(),c=this.getViewItems().indexOf(b);this.fireEvent("itemswipe",this,Ext.get(b),c,a)},updateListItem:function(a,b){var c=this.dataview,d=c.getStore(),e=d.indexOf(a),f=c.prepareData(a.getData(!0),e,a);f.xcount=d.getCount();f.xindex="number"===typeof f.xindex?f.xindex:e;b.innerHTML=c.getItemTpl().apply(f)},addListItem:function(a,b){var c=this.dataview,d=c.getStore(),e=c.prepareData(b.getData(!0),a,b),c=this.element,f=c.dom.childNodes,g=f.length;e.xcount="number"===typeof e.xcount?e.xcount:
d.getCount();e.xindex="number"===typeof e.xindex?e.xindex:a;d=Ext.Element.create(this.getItemElementConfig(a,e));!g||a==g?d.appendTo(c):d.insertBefore(f[a])},getItemElementConfig:function(a,b){var c=this.dataview,d=c.getItemCls(),e=c.getBaseCls()+"-item";d&&(e+=" "+d);return{cls:e,html:c.getItemTpl().apply(b)}},doRemoveItemCls:function(a){for(var b=this.getViewItems(),c=b.length,d=0;d<c;d++)Ext.fly(b[d]).removeCls(a)},doAddItemCls:function(a){for(var b=this.getViewItems(),c=b.length,d=0;d<c;d++)Ext.fly(b[d]).addCls(a)},
moveItemsToCache:function(a,b){for(var c=this.getViewItems(),d=b-a,e;0<=d;d--)e=c[a+d],Ext.get(e).destroy();0==this.getViewItems().length&&this.dataview.showEmptyText()},moveItemsFromCache:function(a){var b=this.dataview,c=b.getStore(),d=a.length;d&&b.hideEmptyText();for(b=0;b<d;b++)a[b]._tmpIndex=c.indexOf(a[b]);Ext.Array.sort(a,function(a,b){return a._tmpIndex>b._tmpIndex?1:-1});for(b=0;b<d;b++)c=a[b],this.addListItem(c._tmpIndex,c),delete c._tmpIndex},getViewItems:function(){return Array.prototype.slice.call(this.element.dom.childNodes)},
updateAtNewIndex:function(a,b,c){this.moveItemsToCache(a,a);this.moveItemsFromCache([c])},destroy:function(){for(var a=this.getViewItems(),b=a.length,c=0;c<b;c++)Ext.get(a[c]).destroy();this.callParent()}});
Ext.define("Ext.dataview.DataView",{extend:Ext.Container,alternateClassName:"Ext.DataView",mixins:[Ext.mixin.Selectable],xtype:"dataview",config:{store:null,data:null,baseCls:Ext.baseCSSPrefix+"dataview",emptyText:null,deferEmptyText:!0,itemTpl:"\x3cdiv\x3e{text}\x3c/div\x3e",pressedCls:"x-item-pressed",itemCls:null,selectedCls:"x-item-selected",triggerEvent:"itemtap",triggerCtEvent:"tap",deselectOnContainerClick:!0,scrollable:!0,inline:null,pressedDelay:100,loadingText:"Loading...",useComponents:null,
itemConfig:{},maxItemCache:20,defaultType:"dataitem",scrollToTopOnRefresh:!0},constructor:function(a){var b;this.hasLoadedStore=!1;this.mixins.selectable.constructor.apply(this,arguments);this.indexOffset=0;this.callParent(arguments);(b=this.getLayout())&&!b.isAuto&&Ext.Logger.error("The base layout for a DataView must always be an Auto Layout")},updateItemCls:function(a,b){var c=this.container;c&&(b&&c.doRemoveItemCls(b),a&&c.doAddItemCls(a))},storeEventHooks:{beforeload:"onBeforeLoad",load:"onLoad",
refresh:"refresh",addrecords:"onStoreAdd",removerecords:"onStoreRemove",updaterecord:"onStoreUpdate"},initialize:function(){this.callParent();var a,b=this.getTriggerEvent();this.on(this.getTriggerCtEvent(),this.onContainerTrigger,this);a=this.container=this.add(new (Ext.dataview[this.getUseComponents()?"component":"element"].Container)({baseCls:this.getBaseCls()}));a.dataview=this;if(b)this.on(b,this.onItemTrigger,this);a.on({itemtouchstart:"onItemTouchStart",itemtouchend:"onItemTouchEnd",itemtap:"onItemTap",
itemtaphold:"onItemTapHold",itemtouchmove:"onItemTouchMove",itemsingletap:"onItemSingleTap",itemdoubletap:"onItemDoubleTap",itemswipe:"onItemSwipe",scope:this});if(this.getStore())if(this.isPainted())this.refresh();else this.on({painted:"refresh",single:!0})},applyInline:function(a){Ext.isObject(a)&&(a=Ext.apply({},a));return a},updateInline:function(a,b){var c=this.getBaseCls();b&&this.removeCls([c+"-inlineblock",c+"-nowrap"]);a&&(this.addCls(c+"-inlineblock"),Ext.isObject(a)&&!1===a.wrap?this.addCls(c+
"-nowrap"):this.removeCls(c+"-nowrap"))},prepareData:function(a){return a},onContainerTrigger:function(a){a.target==this.element.dom&&this.getDeselectOnContainerClick()&&this.getStore()&&this.deselectAll()},onItemTrigger:function(a,b){this.isDestroyed||this.selectWithEvent(this.getStore().getAt(b))},doAddPressedCls:function(a){a=this.getItemAt(this.getStore().indexOf(a));Ext.isElement(a)&&(a=Ext.get(a));a&&(a.isComponent?a.renderElement.addCls(this.getPressedCls()):a.addCls(this.getPressedCls()))},
onItemTouchStart:function(a,b,c,d){a=(a=this.getStore())&&a.getAt(c);this.fireAction("itemtouchstart",[this,c,b,a,d],"doItemTouchStart")},doItemTouchStart:function(a,b,c,d){b=a.getPressedDelay();d&&(0<b?a.pressedTimeout=Ext.defer(a.doAddPressedCls,b,a,[d]):a.doAddPressedCls(d))},onItemTouchEnd:function(a,b,c,d){a=(a=this.getStore())&&a.getAt(c);this.hasOwnProperty("pressedTimeout")&&(clearTimeout(this.pressedTimeout),delete this.pressedTimeout);a&&b&&(b.isComponent?b.renderElement.removeCls(this.getPressedCls()):
b.removeCls(this.getPressedCls()));this.fireEvent("itemtouchend",this,c,b,a,d)},onItemTouchMove:function(a,b,c,d){a=(a=this.getStore())&&a.getAt(c);this.hasOwnProperty("pressedTimeout")&&(clearTimeout(this.pressedTimeout),delete this.pressedTimeout);a&&b&&(b.isComponent?b.renderElement.removeCls(this.getPressedCls()):b.removeCls(this.getPressedCls()));this.fireEvent("itemtouchmove",this,c,b,a,d)},onItemTap:function(a,b,c,d){a=(a=this.getStore())&&a.getAt(c);this.fireEvent("itemtap",this,c,b,a,d)},
onItemTapHold:function(a,b,c,d){a=(a=this.getStore())&&a.getAt(c);this.fireEvent("itemtaphold",this,c,b,a,d)},onItemSingleTap:function(a,b,c,d){a=(a=this.getStore())&&a.getAt(c);this.fireEvent("itemsingletap",this,c,b,a,d)},onItemDoubleTap:function(a,b,c,d){a=(a=this.getStore())&&a.getAt(c);this.fireEvent("itemdoubletap",this,c,b,a,d)},onItemSwipe:function(a,b,c,d){a=(a=this.getStore())&&a.getAt(c);this.fireEvent("itemswipe",this,c,b,a,d)},onItemSelect:function(a,b){b?this.doItemSelect(this,a):this.fireAction("select",
[this,a],"doItemSelect")},doItemSelect:function(a,b){if(a.container&&!a.isDestroyed){var c=a.getItemAt(a.getStore().indexOf(b));Ext.isElement(c)&&(c=Ext.get(c));c&&(c.isComponent?(c.renderElement.removeCls(a.getPressedCls()),c.renderElement.addCls(a.getSelectedCls())):(c.removeCls(a.getPressedCls()),c.addCls(a.getSelectedCls())))}},onItemDeselect:function(a,b){this.container&&!this.isDestroyed&&(b?this.doItemDeselect(this,a):this.fireAction("deselect",[this,a,b],"doItemDeselect"))},doItemDeselect:function(a,
b){var c=a.getItemAt(a.getStore().indexOf(b));Ext.isElement(c)&&(c=Ext.get(c));c&&(c.isComponent?c.renderElement.removeCls([a.getPressedCls(),a.getSelectedCls()]):c.removeCls([a.getPressedCls(),a.getSelectedCls()]))},updateData:function(a){var b=this.getStore();b?b.add(a):this.setStore(Ext.create("Ext.data.Store",{data:a,autoDestroy:!0}))},applyStore:function(a){var b=Ext.apply({},this.storeEventHooks,{scope:this});if(a)if((a=Ext.data.StoreManager.lookup(a))&&Ext.isObject(a)&&a.isStore){if(a.on(b),
b=a.getProxy())if(b=b.getReader())b.on("exception","handleException",this)}else Ext.Logger.warn("The specified Store cannot be found",this);return a},handleException:function(){this.setMasked(!1)},updateStore:function(a,b){var c=Ext.apply({},this.storeEventHooks,{scope:this});if(b&&Ext.isObject(b)&&b.isStore){b.un(c);if(!this.isDestroyed)this.onStoreClear();if(b.getAutoDestroy())b.destroy();else if(c=b.getProxy())(c=c.getReader())&&c.un("exception","handleException",this)}if(a){a.isLoaded()&&(this.hasLoadedStore=
!0);if(a.isLoading())this.onBeforeLoad();this.container&&this.refresh()}},onBeforeLoad:function(){var a=this.getLoadingText();a&&this.isPainted()&&this.setMasked({xtype:"loadmask",message:a});this.hideEmptyText()},updateEmptyText:function(a,b){var c;b&&this.emptyTextCmp&&(this.remove(this.emptyTextCmp,!0),delete this.emptyTextCmp);a&&(this.emptyTextCmp=this.add({xtype:"component",cls:this.getBaseCls()+"-emptytext",html:a,hidden:!0}),(c=this.getStore())&&(this.hasLoadedStore&&!c.getCount())&&this.showEmptyText())},
onLoad:function(a){this.hasLoadedStore=!0;this.setMasked(!1);a.getCount()||this.showEmptyText()},refresh:function(){var a=this.container;this.getStore()?a&&this.fireAction("refresh",[this],"doRefresh"):!this.hasLoadedStore&&!this.getDeferEmptyText()&&this.showEmptyText()},applyItemTpl:function(a){return Ext.isObject(a)&&a.isTemplate?a:new Ext.XTemplate(a)},onAfterRender:function(){this.callParent(arguments);this.updateStore(this.getStore())},getItemAt:function(a){return this.getViewItems()[a-this.indexOffset]},
getItemIndex:function(a){a=this.getViewItems().indexOf(a);return-1===a?a:this.indexOffset+a},getViewItems:function(){return this.container.getViewItems()},doRefresh:function(a){var b=a.container,c=a.getStore(),d=c.getRange(),e=a.getViewItems(),f=d.length,g=e.length,h=f-g,j=a.getScrollable();this.getScrollToTopOnRefresh()&&j&&j.getScroller().scrollToTop();if(1>f)a.onStoreClear();else{a.hideEmptyText();0>h?(b.moveItemsToCache(g+h,g-1),e=a.getViewItems(),g=e.length):0<h&&b.moveItemsFromCache(c.getRange(g));
for(a=0;a<g;a++)c=e[a],b.updateListItem(d[a],c);if(this.hasSelection()){b=this.getSelection();d=this.getSelectionCount();for(a=0;a<d;a++)e=b[a],this.doItemSelect(this,e)}}},showEmptyText:function(){this.getEmptyText()&&(this.hasLoadedStore||!this.getDeferEmptyText())&&this.emptyTextCmp.show()},hideEmptyText:function(){this.getEmptyText()&&this.emptyTextCmp.hide()},destroy:function(){var a=this.getStore();(a=(a=a&&a.getProxy())&&a.getReader())&&a.clearListeners();this.callParent(arguments);this.setStore(null)},
onStoreClear:function(){var a=this.container,b=this.getViewItems();a.moveItemsToCache(0,b.length-1);this.showEmptyText()},onStoreAdd:function(a,b){b&&(this.hideEmptyText(),this.container.moveItemsFromCache(b))},onStoreRemove:function(a,b,c){a=this.container;b=b.length;var d;for(d=0;d<b;d++)a.moveItemsToCache(c[d],c[d])},onStoreUpdate:function(a,b,c,d){a=this.container;d="undefined"===typeof d?c:d;d!==c?(a.updateAtNewIndex(d,c,b),this.isSelected(b)&&this.doItemSelect(this,b)):(c=this.getViewItems()[c])&&
a.updateListItem(b,c)}},function(){Ext.deprecateMethod(this,"collectData",null,"Ext.dataview.DataView.collectData() has been removed");Ext.deprecateMethod(this,"findItemByChild",null,"Ext.dataview.DataView.findItemByChild() has been removed");Ext.deprecateMethod(this,"findTargetByEvent",null,"Ext.dataview.DataView.findTargetByEvent() has been removed");Ext.deprecateMethod(this,"getNode",null,"Ext.dataview.DataView.getNode() has been removed");Ext.deprecateMethod(this,"getNodes",null,"Ext.dataview.DataView.getNodes() has been removed");
Ext.deprecateMethod(this,"getRecords",null,"Ext.dataview.DataView.getRecords() has been removed");Ext.deprecateMethod(this,"getSelectedNodes",null,"Ext.dataview.DataView.getSelectedNodes() has been removed");Ext.deprecateMethod(this,"getSelectedRecords",null,"Ext.dataview.DataView.getSelectedRecords() has been removed");Ext.deprecateMethod(this,"indexOf",null,"Ext.dataview.DataView.indexOf() has been removed");Ext.deprecateMethod(this,"refreshNode",null,"Ext.dataview.DataView.refreshNode() has been removed");
Ext.deprecateClassMethod(this,"bindStore","setStore");Ext.deprecateProperty(this,"blockRefresh",null,"Ext.dataview.DataView.blockRefresh has been removed");Ext.deprecateProperty(this,"itemSelector",null,"Ext.dataview.DataView.itemSelector has been removed");Ext.deprecateProperty(this,"multiSelect",null,"Ext.dataview.DataView.multiSelect has been removed");Ext.deprecateProperty(this,"overItemCls",null,"Ext.dataview.DataView.overItemCls has been removed");Ext.deprecateProperty(this,"selectedItemCls",
null,"Ext.dataview.DataView.selectedItemCls has been removed");Ext.deprecateProperty(this,"simpleSelect",null,"Ext.dataview.DataView.simpleSelect has been removed");Ext.deprecateProperty(this,"singleSelect",null,"Ext.dataview.DataView.singleSelect has been removed");Ext.deprecateProperty(this,"trackOver",null,"Ext.dataview.DataView.trackOver has been removed")});
Ext.define("Ext.dataview.IndexBar",{extend:Ext.Component,alternateClassName:"Ext.IndexBar",config:{baseCls:Ext.baseCSSPrefix+"indexbar",direction:"vertical",letters:"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),ui:"alphabet",listPrefix:null},itemCls:Ext.baseCSSPrefix+"",updateDirection:function(a,b){var c=this.getBaseCls();this.element.replaceCls(c+"-"+b,c+"-"+a)},getElementConfig:function(){return{reference:"wrapper",classList:["x-centered","x-indexbar-wrapper"],children:[this.callParent()]}},updateLetters:function(a){this.innerElement.setHtml("");
if(a){var b=a.length,c;for(c=0;c<b;c++)this.innerElement.createChild({html:a[c]})}},updateListPrefix:function(a){a&&a.length&&this.innerElement.createChild({html:a},0)},initialize:function(){this.callParent();this.innerElement.on({touchstart:this.onTouchStart,dragend:this.onDragEnd,drag:this.onDrag,scope:this})},onTouchStart:function(a){a.stopPropagation();this.innerElement.addCls(this.getBaseCls()+"-pressed");this.pageBox=this.innerElement.getPageBox();this.onDrag(a)},onDragEnd:function(){this.innerElement.removeCls(this.getBaseCls()+
"-pressed")},onDrag:function(a){a=Ext.util.Point.fromEvent(a);var b=this.pageBox;b||(b=this.pageBox=this.el.getPageBox());if("vertical"===this.getDirection()){if(a.y>b.bottom||a.y<b.top)return;a=Ext.Element.fromPoint(b.left+b.width/2,a.y)}else{if(a.x>b.right||a.x<b.left)return;a=Ext.Element.fromPoint(a.x,b.top+b.height/2)}a&&this.fireEvent("index",this,a.dom.innerHTML,a)},destroy:function(){for(var a=Array.prototype.slice.call(this.innerElement.dom.childNodes),b=a.length,c=0;c<b;c++)Ext.removeNode(a[c]);
this.callParent()}},function(){Ext.deprecateMethod(this,"isHorizontal",null,"Ext.dataview.IndexBar.isHorizontal() has been removed");Ext.deprecateMethod(this,"isVertical",null,"Ext.dataview.IndexBar.isVertical() has been removed");Ext.deprecateMethod(this,"refresh",null,"Ext.dataview.IndexBar.refresh() has been removed");Ext.deprecateProperty(this,"alphabet",null,"Ext.dataview.IndexBar.alphabet has been removed");Ext.deprecateProperty(this,"itemSelector",null,"Ext.dataview.IndexBar.itemSelector has been removed");
Ext.deprecateProperty(this,"store",null,"Ext.dataview.IndexBar.store has been removed")});Ext.define("Ext.dataview.ListItemHeader",{extend:Ext.Component,xtype:"listitemheader",config:{baseCls:Ext.baseCSSPrefix+"list-header"}});
Ext.define("Ext.dataview.component.ListItem",{extend:Ext.dataview.component.DataItem,xtype:"listitem",config:{baseCls:Ext.baseCSSPrefix+"list-item",dataMap:null,body:{xtype:"component",cls:"x-list-item-body"},disclosure:{xtype:"component",cls:"x-list-disclosure",hidden:!0,docked:"right"},header:{xtype:"component",cls:"x-list-header",html:" "},tpl:null,items:null},applyBody:function(a){a&&!a.isComponent&&(a=Ext.factory(a,Ext.Component,this.getBody()));return a},updateBody:function(a,b){a?this.add(a):
b&&b.destroy()},applyHeader:function(a){a&&!a.isComponent&&(a=Ext.factory(a,Ext.Component,this.getHeader()));return a},updateHeader:function(a,b){b&&b.destroy()},applyDisclosure:function(a){a&&!a.isComponent&&(a=Ext.factory(a,Ext.Component,this.getDisclosure()));return a},updateDisclosure:function(a,b){a?this.add(a):b&&b.destroy()},updateTpl:function(a){this.getBody().setTpl(a)},updateRecord:function(a){var b=this.dataview||this.getDataview(),c=a&&b.prepareData(a.getData(!0),b.getStore().indexOf(a),
a),d=this.getDataMap(),e=this.getBody(),f=this.getDisclosure();this._record=a;d?this.doMapData(d,c,e):e&&e.updateData(c||null);f&&(a&&b.getOnItemDisclosure())&&(a=b.getDisclosureProperty(),f[c.hasOwnProperty(a)&&!1===c[a]?"hide":"show"]());this.fireEvent("updatedata",this,c)},destroy:function(){Ext.destroy(this.getHeader());this.callParent(arguments)}});
Ext.define("Ext.dataview.component.SimpleListItem",{extend:Ext.Component,xtype:"simplelistitem",config:{baseCls:Ext.baseCSSPrefix+"list-item",disclosure:{xtype:"component",cls:"x-list-disclosure",hidden:!0},header:{xtype:"component",cls:"x-list-header",html:" "},dataview:null,record:null},initialize:function(){this.element.addCls(this.getBaseCls()+"-tpl")},applyHeader:function(a){a&&!a.isComponent&&(a=Ext.factory(a,Ext.Component,this.getHeader()));return a},updateHeader:function(a,b){b&&b.destroy()},
applyDisclosure:function(a){a&&!a.isComponent&&(a=Ext.factory(a,Ext.Component,this.getDisclosure()));return a},updateDisclosure:function(a,b){a?this.element.appendChild(a.renderElement):b&&b.destroy()},updateRecord:function(a){var b=this.dataview||this.getDataview(),c=a&&b.prepareData(a.getData(!0),b.getStore().indexOf(a),a),d=this.getDisclosure();this.updateData(c||null);d&&(a&&b.getOnItemDisclosure())&&(a=b.getDisclosureProperty(),d[c.hasOwnProperty(a)&&!1===c[a]?"hide":"show"]())},destroy:function(){Ext.destroy(this.getHeader(),
this.getDisclosure());this.callParent(arguments)}});
Ext.define("Ext.dataview.List",{alternateClassName:"Ext.List",extend:Ext.dataview.DataView,xtype:"list",mixins:[Ext.mixin.Bindable],config:{layout:"fit",indexBar:!1,icon:null,preventSelectionOnDisclose:!0,baseCls:Ext.baseCSSPrefix+"list",pinHeaders:!0,grouped:null,onItemDisclosure:null,disclosureProperty:"disclosure",ui:"normal",defaultType:void 0,itemMap:{},itemHeight:42,variableHeights:!1,refreshHeightOnUpdate:!0,infinite:!1,useSimpleItems:!0,scrollable:null,bufferSize:20,minimumBufferDistance:5,
useHeaders:!0,striped:!1},platformConfig:[{theme:["Windows"],itemHeight:44},{theme:["Cupertino"],itemHeight:43}],topRenderedIndex:0,topVisibleIndex:0,visibleCount:0,constructor:function(){var a;this.callParent(arguments);(a=this.getLayout())&&!a.isFit&&Ext.Logger.error("The base layout for a DataView must always be a Fit Layout")},beforeInitialize:function(){var a=this.container,b,c;Ext.apply(this,{listItems:[],headerItems:[],updatedItems:[],headerMap:[],scrollDockItems:{top:[],bottom:[]}});this.translationMethod=
Ext.browser.is.AndroidStock2?"cssposition":"csstransform";a||(a=this.container=Ext.factory({xtype:"container",scrollable:{scroller:{autoRefresh:!this.getInfinite(),direction:"vertical"}}}));this.add(a);b=a.getScrollable();c=this.scrollViewElement=b.getElement();this.scrollElement=b.getScroller().getElement();this.setScrollable(b);this.scrollableBehavior=a.getScrollableBehavior();a=this.pinnedHeader=Ext.factory({xtype:"listitemheader",html:"\x26nbsp;",translatable:{translationMethod:this.translationMethod},
cls:["x-list-header","x-list-header-swap"]});a.translate(0,-1E4);a.$position=-1E4;c.insertFirst(a.renderElement);this.bind(b.getScroller().getTranslatable(),"doTranslate","onTranslate")},initialize:function(){var a=this.container,b=this.scrollViewElement,c=this.getIndexBar(),d=this.getTriggerEvent(),e=this.getTriggerCtEvent();c&&b.appendChild(c.renderElement);if(d)this.on(d,this.onItemTrigger,this);if(e)this.on(e,this.onContainerTrigger,this);a.element.on({delegate:"."+this.getBaseCls()+"-disclosure",
tap:"handleItemDisclosure",scope:this});a.element.on({resize:"onContainerResize",scope:this});a.innerElement.on({touchstart:"onItemTouchStart",touchend:"onItemTouchEnd",tap:"onItemTap",taphold:"onItemTapHold",singletap:"onItemSingleTap",doubletap:"onItemDoubleTap",swipe:"onItemSwipe",delegate:"."+Ext.baseCSSPrefix+"list-item",scope:this});this.getStore()&&this.refresh()},onTranslate:function(a,b){var c=this.pinnedHeader,d=this.getStore(),d=d&&d.getCount(),e=this.getGrouped(),f=this.getInfinite();
d?f&&this.itemsCount&&(this.handleItemUpdates(b),this.handleItemHeights(),this.handleItemTransforms(),this.onIdleBound||(Ext.AnimationQueue.onIdle(this.onAnimationIdle,this),this.onIdleBound=!0)):(this.showEmptyText(),this.showEmptyScrollDock(),c.$position=-1E4,c.translate(0,-1E4));e&&(this.groups&&this.groups.length&&this.getPinHeaders())&&this.handlePinnedHeader(b);this.onScrollBinder(a,b)},onScrollBinder:function(){},handleItemUpdates:function(a){var b=this.listItems,c=b.length,d=this.getListItemInfo(),
e=this.getItemMap(),f=this.getBufferSize(),g=this.getStore().getCount()-1,h=this.getMinimumBufferDistance(),j=this.topVisibleIndex,k=this.topRenderedIndex;this.topVisibleIndex=a=Math.max(0,e.findIndex(-a)||0);if(j!==a)if(j>a){if(j=a-k,j<h)if(j=Math.min(c,h-j),j==c){this.topRenderedIndex=k=Math.max(0,a-(f-h));for(f=0;f<j;f++)a=k+f,h=b[f],this.updateListItem(h,a,d)}else for(f=0;f<j;f++){a=k-f-1;if(0>a)break;h=b.pop();b.unshift(h);this.updateListItem(h,a,d);this.topRenderedIndex--}}else if(j=f-(a-k),
j<h)if(j=Math.min(c,h-j),j==c){this.topRenderedIndex=k=Math.min(g-c,a-h);for(f=0;f<j;f++)a=k+f,h=b[f],this.updateListItem(h,a,d)}else for(f=0;f<j;f++){a=k+c+f;if(a>g)break;h=b.shift();b.push(h);this.updateListItem(h,a,d);this.topRenderedIndex++}},onAnimationIdle:function(){var a=this.getListItemInfo(),b=this.getBufferSize(),c=this.topVisibleIndex,d=this.topRenderedIndex,e=this.getStore().getCount()-1,f=this.listItems,g=f.length,h,j;h=c-d;b=d+b-c;if(h<b){if(0<c){h=b-h;for(c=0;c<h;c++){j=d-c-1;if(0>
j)break;b=f.pop();f.unshift(b);this.updateListItem(b,j,a);this.topRenderedIndex--}}}else{h-=b;for(c=0;c<h;c++){j=d+g+c;if(j>e)break;b=f.shift();f.push(b);this.updateListItem(b,j,a);this.topRenderedIndex++}}this.handleItemHeights();this.handleItemTransforms();this.onIdleBound=!1},handleItemHeights:function(){var a=this.updatedItems,b=a.length,c=this.getItemMap(),d=this.getUseSimpleItems(),e=c.getMinimumHeight(),f=this.headerIndices,g=this.headerMap,h=this.getVariableHeights(),j,k,q,t,m,n,p;for(k=0;k<
b;k++)if(m=a[k],j=m.$dataIndex,null!==j){h?(n=d?m.element.getHeight():m.element.getFirstChild().getHeight(),n=Math.max(n,e)):n=e;m.$ownItemHeight=n;t=this.scrollDockItems.top.length;if(m.isFirst)for(q=this.totalScrollDockTopHeight=0;q<t;q++)p=this.scrollDockItems.top[q].$scrollDockHeight,n+=p,this.totalScrollDockTopHeight+=p;t=this.scrollDockItems.bottom.length;if(m.isLast)for(q=0;q<t;q++)p=this.scrollDockItems.bottom[q].$scrollDockHeight,n+=p;f&&f[j]&&(n+=this.headerHeight);c.setItemHeight(j,n);
m.$height=n}c.update();n=c.getTotalHeight();g.length=0;for(k in f)f.hasOwnProperty(k)&&g.push(c.map[k]);this.setScrollerHeight(n);this.updatedItems.length=0},setScrollerHeight:function(a){var b=this.container.getScrollable().getScroller(),c=b.getTranslatable();a!=b.givenSize&&(b.setSize(a),b.refreshMaxPosition(),b.fireEvent("refresh",b),c.isAnimating&&(c.activeEasingY&&c.activeEasingY.setMinMomentumValue)&&c.activeEasingY.setMinMomentumValue(-b.getMaxPosition().y))},handleItemTransforms:function(){var a=
this.listItems,b=a.length,c=this.getItemMap(),d=this.scrollDockItems,e=this.getGrouped(),f,g,h,j,k;for(h=0;h<b;h++)if(f=a[h],g=c.map[f.$dataIndex],!f.$hidden&&f.$position!==g){f.$position=g;j=d.top.length;if(f.isFirst&&j)for(k=0;k<j;k++)d.top[k].translate(0,g),g+=d.top[k].$scrollDockHeight;e&&(this.getUseHeaders()&&this.headerIndices&&this.headerIndices[f.$dataIndex])&&(f.getHeader().translate(0,g),g+=this.headerHeight);f.translate(0,g);g+=f.$ownItemHeight;j=d.bottom.length;if(f.isLast&&j)for(k=0;k<
j;k++)d.bottom[k].translate(0,g),g+=d.bottom[k].$scrollDockHeight}},handlePinnedHeader:function(a){var b=this.pinnedHeader,c=this.getItemMap(),d=this.groups,e=this.headerMap,f=this.headerHeight,g=this.getStore(),h=this.totalScrollDockTopHeight,c=c.binarySearch(e,-a);if(d=d[c].children[0])f=a+e[c+1]-f,a=0<=a||0===c&&0<=h+a||0===c&&-a<=e[c]?-1E4:0>f?f:Math.max(0,a),g=g.getGroupString(d),b.$currentHeader!=g&&(b.setHtml(g),b.$currentHeader=g),b.$position!=a&&(b.translate(0,a),b.$position=a)},createItem:function(a){var b=
this.container,c=this.listItems,d=this.getInfinite(),e=this.scrollElement,f=this.getUseHeaders(),g,h;g=Ext.factory(a);g.dataview=this;g.$height=a.minHeight;d||(h=this.getBaseCls()+"-item-relative",g.addCls(h));f&&(a=g.getHeader(),d?(a.setTranslatable({translationMethod:this.translationMethod}),a.translate(0,-1E4),e.insertFirst(a.renderElement)):a.addCls(h));b.doAdd(g);c.push(g);return g},setItemsCount:function(a){var b=this.listItems,c=this.getListItemConfig(),d=a-b.length,e;for(e=0;e<d;e++)this.createItem(c);
for(e=d;0>e;e++)b.pop().destroy();this.itemsCount=a;this.updateAllListItems();Ext.browser.is.AndroidStock&&(this.container.element&&0===a&&0!==d)&&this.container.element.redraw();return this.listItems},updateUi:function(a,b){a&&(a!=b&&"round"==a)&&this.setPinHeaders(!1);this.callParent(arguments)},updateListItem:function(a,b,c){var d=c.store.getAt(b),e=this.headerIndices,f=this.footerIndices,g=this.getUseHeaders(),h=g&&a.getHeader(),j=this.scrollDockItems,k=this.updatedItems,q=a.renderElement.classList.slice(),
t=g&&h.renderElement.classList.slice(),m=this.getInfinite(),n=c.store.getCount(),p=[],r=[],u=[c.headerCls,c.footerCls,c.firstCls,c.lastCls,c.selectedCls,c.stripeCls],v=[c.headerCls,c.footerCls,c.firstCls,c.lastCls],l,s;m&&(a.$position=-1E4);if(d){a.$hidden&&(m||a.show(),a.$hidden=!1);m&&k.push(a);if(a.isFirst&&0!==b&&j.top.length){l=0;for(k=j.top.length;l<k;l++)s=j.top[l],m&&s.translate(0,-1E4);a.isFirst=!1}if(a.isLast&&b!==n-1&&j.bottom.length){l=0;for(k=j.bottom.length;l<k;l++)s=j.bottom[l],m&&
s.translate(0,-1E4);a.isLast=!1}a.$dataIndex!==b&&(a.$dataIndex=b,this.fireEvent("itemindexchange",this,d,b,a));a.getRecord()===d?a.updateRecord(d):a.setRecord(d);this.isSelected(d)&&p.push(c.selectedCls);c.grouped&&g&&(e[b]?(p.push(c.headerCls),r.push(c.headerCls),h.setHtml(c.store.getGroupString(d)),m||h.renderElement.insertBefore(a.renderElement),h.show()):m?h.translate(0,-1E4):h.hide(),f[b]&&(p.push(c.footerCls),r.push(c.footerCls)));!c.grouped&&g&&h.hide();if(0===b&&(a.isFirst=!0,p.push(c.firstCls),
r.push(c.firstCls),c.grouped||(p.push(c.headerCls),r.push(c.headerCls)),!m)){l=0;for(k=j.top.length;l<k;l++)s=j.top[l],c.grouped?s.renderElement.insertBefore(h.renderElement):s.renderElement.insertBefore(a.renderElement)}if(b===n-1&&(a.isLast=!0,p.push(c.lastCls),r.push(c.lastCls),c.grouped||(p.push(c.footerCls),r.push(c.footerCls)),!m)){l=0;for(k=j.bottom.length;l<k;l++)s=j.bottom[l],s.renderElement.insertAfter(a.renderElement)}c.striped&&1==b%2&&p.push(c.stripeCls);if(q){for(l=0;l<u.length;l++)Ext.Array.remove(q,
u[l]);p=Ext.Array.merge(p,q)}if(g&&t){for(l=0;l<v.length;l++)Ext.Array.remove(t,v[l]);r=Ext.Array.merge(r,t)}b=p.join(" ");a.classCache!==b&&(a.renderElement.setCls(p),a.classCache=b);g&&h.renderElement.setCls(r)}else a.setRecord(null),m?a.translate(0,-1E4):a.hide(),g&&(m?h.translate(0,-1E4):h.hide()),a.$hidden=!0},updateAllListItems:function(){var a=this.getStore(),b=this.listItems,c=this.getListItemInfo(),d=this.topRenderedIndex,e,f;if(a){e=0;for(f=b.length;e<f;e++)this.updateListItem(b[e],d+e,
c)}this.isPainted()&&(this.getInfinite()&&(a&&a.getCount())&&this.handleItemHeights(),this.refreshScroller())},doRefresh:function(){var a=this.getInfinite(),b=this.container.getScrollable().getScroller(),c=this.getStore().getCount();a&&this.getItemMap().populate(c,this.topRenderedIndex);this.getGrouped()&&this.refreshHeaderIndices();if(c)this.hideScrollDockItems(),this.hideEmptyText(),a?(this.getScrollToTopOnRefresh()&&(this.topVisibleIndex=this.topRenderedIndex=0,b.position.y=0),this.updateAllListItems()):
(this.setItemsCount(c),this.getScrollToTopOnRefresh()&&b.scrollTo(0,0));else this.onStoreClear()},onContainerResize:function(a,b){var c=this.visibleCount;this.headerHeight||(this.headerHeight=parseInt(this.pinnedHeader.renderElement.getHeight(),10));this.getInfinite()?(this.visibleCount=Math.ceil(b.height/this.getItemMap().getMinimumHeight()),this.visibleCount!=c&&(this.setItemsCount(this.visibleCount+this.getBufferSize()),this.fireEvent("updatevisiblecount",this,this.visibleCount,c))):this.listItems.length&&
(this.getUseHeaders()&&this.getGrouped()&&this.getPinHeaders())&&this.updateHeaderMap()},refreshScroller:function(){this.isPainted()&&(!this.getInfinite()&&(this.getGrouped()&&this.getPinHeaders())&&this.updateHeaderMap(),this.container.getScrollable().getScroller().refresh())},updateHeaderMap:function(){var a=this.headerMap,b=this.headerIndices,c,d;a.length=0;for(d in b)b.hasOwnProperty(d)&&(c=this.getItemAt(d).getHeader(),a.push(c.renderElement.dom.offsetTop))},applyVariableHeights:function(a){return!this.getInfinite()?
!0:a},applyDefaultType:function(a){a||(a=this.getUseSimpleItems()?"simplelistitem":"listitem");return a},applyItemMap:function(a){return Ext.factory(a,Ext.util.PositionMap,this.getItemMap())},updateItemHeight:function(a){this.getItemMap().setMinimumHeight(a)},applyIndexBar:function(a){return Ext.factory(a,Ext.dataview.IndexBar,this.getIndexBar())},updatePinHeaders:function(a){this.isPainted()&&this.pinnedHeader.translate(0,a?this.pinnedHeader.$position:-1E4)},updateItemTpl:function(a){var b=this.listItems,
c=b.length||0,d,e;for(d=0;d<c;d++)e=b[d],e.setTpl(a);this.updateAllListItems()},updateItemCls:function(a,b){var c=this.listItems,d=c.length,e,f;for(e=0;e<d;e++)f=c[e],f.removeCls(b),f.addCls(a)},updateIndexBar:function(a,b){var c=this.scrollViewElement;b&&(b.un({index:"onIndex",scope:this}),a||this.element.removeCls(this.getBaseCls()+"-indexed"),c&&c.removeChild(b.renderElement));a&&(a.on({index:"onIndex",scope:this}),b||this.element.addCls(this.getBaseCls()+"-indexed"),c&&c.appendChild(a.renderElement))},
updateGrouped:function(a){var b=this.getBaseCls(),c=this.pinnedHeader,d=b+"-grouped",b=b+"-ungrouped";c&&c.translate(0,-1E4);a?(this.addCls(d),this.removeCls(b)):(this.addCls(b),this.removeCls(d));this.getInfinite()&&(this.refreshHeaderIndices(),this.handleItemHeights());this.updateAllListItems()},onStoreAdd:function(){this.doRefresh()},onStoreRemove:function(){this.doRefresh()},onStoreUpdate:function(a,b,c,d){d="undefined"===typeof d?c:d;this.getInfinite()||d!==c?this.doRefresh():(a=this.listItems[c])&&
this.updateListItem(a,c,this.getListItemInfo())},onStoreClear:function(){var a=this.container.getScrollable().getScroller(),b=this.getInfinite();this.pinnedHeader&&this.pinnedHeader.translate(0,-1E4);b?(this.topVisibleIndex=this.topRenderedIndex=0,a.position.y=0,this.updateAllListItems()):(this.setItemsCount(0),a.scrollTo(0,0))},showEmptyScrollDock:function(){var a=this.getInfinite(),b=this.scrollDockItems,c=0,d,e,f;d=0;for(e=b.top.length;d<e;d++)f=b.top[d],a?(f.translate(0,c),c+=f.$scrollDockHeight):
this.scrollElement.appendChild(f.renderElement);d=0;for(e=b.bottom.length;d<e;d++)f=b.bottom[d],a?(f.translate(0,c),c+=f.$scrollDockHeight):this.scrollElement.appendChild(f.renderElement)},hideScrollDockItems:function(){var a=this.getInfinite(),b=this.scrollDockItems,c,d;if(a){a=0;for(c=b.top.length;a<c;a++)d=b.top[a],d.translate(0,-1E4);a=0;for(c=b.bottom.length;a<c;a++)d=b.bottom[a],d.translate(0,-1E4)}},getItemAt:function(a){var b=this.listItems,c=b.length,d,e;for(d=0;d<c;d++)if(e=b[d],e.$dataIndex==
a)return e},getItemIndex:function(a){return a.$dataIndex},getViewItems:function(){return this.listItems},getListItemInfo:function(){var a=this.getBaseCls();return{store:this.getStore(),grouped:this.getGrouped(),baseCls:a,selectedCls:this.getSelectedCls(),headerCls:a+"-header-wrap",footerCls:a+"-footer-wrap",firstCls:a+"-item-first",lastCls:a+"-item-last",stripeCls:a+"-item-odd",striped:this.getStriped(),itemMap:this.getItemMap(),defaultItemHeight:this.getItemHeight()}},getListItemConfig:function(){var a=
this.getItemMap().getMinimumHeight(),b={xtype:this.getDefaultType(),itemConfig:this.getItemConfig(),tpl:this.getItemTpl(),minHeight:a,cls:this.getItemCls()};this.getInfinite()&&(b.translatable={translationMethod:this.translationMethod});this.getVariableHeights()||(b.height=a);return b},refreshHeaderIndices:function(){var a=this.getStore(),b=a&&a.getCount(),c=a.getGroups(),d=this.getGrouped(),e=c.length,f=this.headerIndices={},g=this.footerIndices={},h;if(!d)return g;this.groups=c;for(d=0;d<e;d++)h=
c[d].children[0],h=a.indexOf(h),f[h]=!0,h-=1,0<=h&&(g[h]=!0);g[b-1]=!0;return f},onIndex:function(a,b){var c=b.toLowerCase(),d=this.getStore().getGroups(),e=d.length,f,g,h;for(g=0;g<e&&!(f=d[g],h=f.name.toLowerCase(),h>=c);g++);f&&this.scrollToRecord(f.children[0])},scrollToRecord:function(a,b,c){var d=this.container.getScrollable().getScroller(),e=this.getStore().indexOf(a);d.stopAnimation();a=d.getContainerSize().y;a=d.getSize().y-a;this.getInfinite()?e=this.getItemMap().map[e]:(e=this.listItems[e],
e=this.getUseHeaders()&&e.getHeader().isPainted()?e.getHeader().renderElement.dom.offsetTop:e.renderElement.dom.offsetTop);c||(e=Math.min(e,a));d.scrollTo(0,e,!!b)},onItemAdd:function(a){var b=a.config;b.scrollDock?("bottom"==b.scrollDock?this.scrollDockItems.bottom.push(a):this.scrollDockItems.top.push(a),this.getInfinite()&&(a.on({resize:"onScrollDockItemResize",scope:this}),a.addCls(this.getBaseCls()+"-scrolldockitem"),a.setTranslatable({translationMethod:this.translationMethod}),a.translate(0,
-1E4),a.$scrollDockHeight=0),this.container.doAdd(a)):this.callParent(arguments)},getScrollDockedItems:function(){return this.scrollDockItems.bottom.slice().concat(this.scrollDockItems.top.slice())},onScrollDockItemResize:function(a,b){var c=this.listItems,d=c.length,e,f;Ext.getCmp(a.id).$scrollDockHeight=b.height;for(e=0;e<d;e++)if(f=c[e],f.isLast){this.updatedItems.push(f);this.refreshScroller();break}},onItemTouchStart:function(a){this.container.innerElement.on({touchmove:"onItemTouchMove",delegate:"."+
Ext.baseCSSPrefix+"list-item",single:!0,scope:this});this.callParent(this.parseEvent(a))},onItemTouchMove:function(a){this.callParent(this.parseEvent(a))},onItemTouchEnd:function(a){this.container.innerElement.un({touchmove:"onItemTouchMove",delegate:"."+Ext.baseCSSPrefix+"list-item",scope:this});this.callParent(this.parseEvent(a))},onItemTap:function(a){this.callParent(this.parseEvent(a))},onItemTapHold:function(a){this.callParent(this.parseEvent(a))},onItemSingleTap:function(a){this.callParent(this.parseEvent(a))},
onItemDoubleTap:function(a){this.callParent(this.parseEvent(a))},onItemSwipe:function(a){this.callParent(this.parseEvent(a))},parseEvent:function(a){var b=Ext.fly(a.getTarget()).findParent("."+Ext.baseCSSPrefix+"list-item",8),b=Ext.getCmp(b.id);return[this,b,b.$dataIndex,a]},doItemSelect:function(a,b){this.callParent(arguments);var c=a.getItemAt(a.getStore().indexOf(b));a.container&&(!a.isDestroyed&&c&&c.isComponent)&&(c.classCache=c.renderElement.classList.slice())},doItemDeselect:function(a,b){this.callParent(arguments);
var c=a.getItemAt(a.getStore().indexOf(b));c&&c.isComponent&&(c.classCache=c.renderElement.classList.slice())},applyOnItemDisclosure:function(a){return Ext.isFunction(a)?{scope:this,handler:a}:a},handleItemDisclosure:function(a){var b=Ext.getCmp(Ext.get(a.getTarget()).up(".x-list-item").id),c=b.$dataIndex,d=this.getStore().getAt(c);this.fireAction("disclose",[this,d,b,c,a],"doDisclose")},doDisclose:function(a,b,c,d,e){var f=a.getOnItemDisclosure();f&&f.handler&&f.handler.call(f.scope||a,b,c,d,e)},
onItemTrigger:function(a,b,c,d,e){(!this.getPreventSelectionOnDisclose()||!Ext.fly(e.target).hasCls(this.getBaseCls()+"-disclosure"))&&this.callParent(arguments)},destroy:function(){var a=this.listItems,b=a.length,c;this.callParent(arguments);this.onIdleBound&&Ext.AnimationQueue.unIdle(this.onAnimationIdle,this);for(c=0;c<b;c++)a[c].destroy();this.listItems=null}});
Ext.define("Ext.dataview.NestedList",{alternateClassName:"Ext.NestedList",extend:Ext.Container,xtype:"nestedlist",config:{baseCls:Ext.baseCSSPrefix+"nested-list",backText:"Back",useTitleAsBackText:!0,updateTitleText:!0,displayField:"text",loadingText:"Loading...",emptyText:"No items available.",onItemDisclosure:!1,allowDeselect:!1,useToolbar:null,toolbar:{docked:"top",xtype:"titlebar",ui:"light",inline:!0},title:"",layout:{type:"card",animation:{type:"slide",duration:250,direction:"left"}},store:null,
detailContainer:void 0,detailCard:null,backButton:{ui:"back",hidden:!0},listConfig:null,useSimpleItems:!0,itemHeight:47,variableHeights:!1,lastNode:null,lastActiveList:null,ui:null,clearSelectionOnListChange:!0},platformConfig:[{theme:["Windows"],itemHeight:42},{theme:["Cupertino"],itemHeight:43,useTitleAsBackText:!0,updateTitleText:!1},{theme:["Blackberry"],toolbar:{splitNavigation:!0}},{theme:["Tizen"],backText:""}],constructor:function(a){Ext.isObject(a)&&(a.getTitleTextTpl&&(this.getTitleTextTpl=
a.getTitleTextTpl),a.getItemTextTpl&&(this.getItemTextTpl=a.getItemTextTpl));this.callParent(arguments)},onItemInteraction:function(){if(this.isGoingTo)return!1},applyDetailContainer:function(a){a||(a=this);return a},updateDetailContainer:function(a){a&&(a.onBefore("activeitemchange","onBeforeDetailContainerChange",this),a.onAfter("activeitemchange","onDetailContainerChange",this))},onBeforeDetailContainerChange:function(){this.isGoingTo=!0},onDetailContainerChange:function(){this.isGoingTo=!1},onItemTap:function(a,
b,c,d,e){var f=a.getStore().getAt(b);this.fireEvent("itemtap",this,a,b,c,d,e);f.isLeaf()?(this.fireEvent("leafitemtap",this,a,b,c,d,e),this.goToLeaf(f)):this.goToNode(f)},onBeforeSelect:function(){this.fireEvent.apply(this,[].concat("beforeselect",this,Array.prototype.slice.call(arguments)))},onContainerTap:function(){this.fireEvent.apply(this,[].concat("containertap",this,Array.prototype.slice.call(arguments)))},onSelectionChange:function(){this.fireEvent.apply(this,[].concat("selectionchange",this,
Array.prototype.slice.call(arguments)))},onItemDoubleTap:function(){this.fireEvent.apply(this,[].concat("itemdoubletap",this,Array.prototype.slice.call(arguments)))},onStoreBeforeLoad:function(){var a=this.getLoadingText(),b=this.getScrollable();a&&(this.setMasked({xtype:"loadmask",message:a}),b&&b.getScroller().setDisabled(!0));this.fireEvent.apply(this,[].concat("beforeload",this,Array.prototype.slice.call(arguments)))},onStoreLoad:function(a,b,c,d){this.setMasked(!1);this.fireEvent.apply(this,
[].concat("load",this,Array.prototype.slice.call(arguments)));-1===a.indexOf(this.getLastNode())&&this.goToNode(a.getRoot())},onBackTap:function(){var a=this.getLastNode(),b=this.getDetailCard(),b=b&&this.getActiveItem()==b,c=this.getLastActiveList();this.fireAction("back",[this,a,c,b],"doBack")},doBack:function(a,b,c,d){var e=a.getLayout(),e=e?e.getAnimation():null;d&&c?(e&&e.setReverse(!0),a.setActiveItem(c),a.setLastNode(b.parentNode),a.syncToolbar()):this.goToNode(b.parentNode)},updateData:function(a){this.getStore()||
this.setStore(new Ext.data.TreeStore({root:a}))},applyStore:function(a){a&&(Ext.isString(a)?a=Ext.data.StoreManager.get(a):a instanceof Ext.data.TreeStore||(a=Ext.factory(a,Ext.data.TreeStore,null)),a||Ext.Logger.warn("The specified Store cannot be found",this));return a},storeListeners:{rootchange:"onStoreRootChange",load:"onStoreLoad",beforeload:"onStoreBeforeLoad"},updateStore:function(a,b){var c=this.storeListeners;c.scope=this;b&&(Ext.isObject(b)&&b.isStore)&&(b.autoDestroy&&b.destroy(),b.un(c));
a&&(a.on(c),this.goToNode(a.getRoot()))},onStoreRootChange:function(a,b){this.goToNode(b)},applyBackButton:function(a){return Ext.factory(a,Ext.Button,this.getBackButton())},applyDetailCard:function(a,b){return null===a?Ext.factory(a,Ext.Component,b):Ext.factory(a,Ext.Component)},updateBackButton:function(a,b){if(a){a.on("tap",this.onBackTap,this);a.setText(this.getBackText());var c=this.getToolbar();this.$backButtonContainer?this.$backButtonContainer.insert(0,a):c.insert(0,a)}else b&&b.destroy()},
applyToolbar:function(a){a&&a.splitNavigation&&(Ext.apply(a,{docked:"top",xtype:"titlebar",ui:"light"}),this.$backButtonContainer=this.add(Ext.apply({xtype:"toolbar",docked:"bottom",hidden:!0,ui:"dark"},!0===a.splitNavigation?{}:a.splitNavigation)));return Ext.factory(a,Ext.TitleBar,this.getToolbar())},updateToolbar:function(a,b){a?(a.setTitle(this.getTitle()),a.getParent()||this.add(a)):b&&b.destroy()},updateUseToolbar:function(a){a||this.setToolbar(!1)},updateTitle:function(a){var b=this.getToolbar();
b&&this.getUpdateTitleText()&&b.setTitle(a)},getItemTextTpl:function(){return"{"+this.getDisplayField()+"}"},getTitleTextTpl:function(){return"{"+this.getDisplayField()+"}"},renderTitleText:function(a,b){a.titleTpl||(a.titleTpl=Ext.create("Ext.XTemplate",this.getTitleTextTpl(a)));if(a.isRoot()){var c=this.getInitialConfig("title");return b&&""===c?this.getInitialConfig("backText"):c}return a.titleTpl.applyTemplate(a.data)},goToNode:function(a){if(a){var b=this.getActiveItem(),c=this.getDetailCard(),
b=c&&this.getActiveItem()==c,d=this.goToNodeReverseAnimation(a),c=this.firstList,e=this.secondList,f=this.getLayout(),f=f?f.getAnimation():null;if(a.isLeaf())throw Error("goToNode: passed a node which is a leaf.");if(a!=this.getLastNode()||b)b?(f&&f.setReverse(!0),c=this.getLastActiveList(),c.getStore().setNode(a),a.expand(),this.setActiveItem(c)):(f&&f.setReverse(d),c&&e?(b=this.getActiveItem(),this.setLastActiveList(b),c=b==c?e:c,c.getStore().setNode(a),a.expand(),this.setActiveItem(c),this.getClearSelectionOnListChange()&&
c.deselectAll()):c?(this.setLastActiveList(this.getActiveItem()),this.setActiveItem(this.getList(a)),this.secondList=this.getActiveItem()):(this.setActiveItem(this.getList(a)),this.firstList=this.getActiveItem())),this.fireEvent("listchange",this,this.getActiveItem()),this.setLastNode(a),this.syncToolbar()}},goToLeaf:function(a){if(!a.isLeaf())throw Error("goToLeaf: passed a node which is not a leaf.");var b=this.getDetailCard(a),c=this.getDetailContainer(),d=c==this,e=this.getLayout(),e=e?e.getAnimation():
!1;b&&(-1===c.getItems().indexOf(b)&&c.add(b),d&&(this.getActiveItem()instanceof Ext.dataview.List&&this.setLastActiveList(this.getActiveItem()),this.setLastNode(a)),e&&e.setReverse(!1),c.setActiveItem(b),this.syncToolbar())},syncToolbar:function(a){var b=this.getDetailCard(),c=this.getLastNode();a=a||b&&this.getActiveItem()==b?c:c.parentNode;if(b=this.getBackButton()){if(this.getToolbar().getInitialConfig("splitNavigation"))this.$backButtonContainer[a?"show":"hide"]();b[a?"show":"hide"]();a&&this.getUseTitleAsBackText()&&
b.setText(this.renderTitleText(c.parentNode,!0))}c&&this.setTitle(this.renderTitleText(c))},updateBackText:function(a){this.getBackButton().setText(a)},goToNodeReverseAnimation:function(a){var b=this.getLastNode();return!b?!1:!b.contains(a)&&b.isAncestor(a)?!0:!1},getList:function(a){var b=Ext.create("Ext.data.NodeStore",{recursive:!1,node:a,rootVisible:!1,model:this.getStore().getModel()});a.expand();return Ext.Object.merge({xtype:"list",useSimpleItems:this.getUseSimpleItems(),pressedDelay:250,autoDestroy:!0,
store:b,onItemDisclosure:this.getOnItemDisclosure(),allowDeselect:this.getAllowDeselect(),itemHeight:this.getItemHeight(),variableHeights:this.getVariableHeights(),emptyText:this.getEmptyText(),listeners:[{event:"itemdoubletap",fn:"onItemDoubleTap",scope:this},{event:"itemtap",fn:"onItemInteraction",scope:this,order:"before"},{event:"itemtouchstart",fn:"onItemInteraction",scope:this,order:"before"},{event:"itemtap",fn:"onItemTap",scope:this},{event:"beforeselectionchange",fn:"onBeforeSelect",scope:this},
{event:"containertap",fn:"onContainerTap",scope:this},{event:"selectionchange",fn:"onSelectionChange",order:"before",scope:this}],itemTpl:'\x3cspan\x3ctpl if\x3d"leaf \x3d\x3d true"\x3e class\x3d"x-list-item-leaf"\x3c/tpl\x3e\x3e'+this.getItemTextTpl(a)+"\x3c/span\x3e"},this.getListConfig())}},function(){Ext.deprecateMethod(this,"getSubList",null,"Ext.dataview.NestedList.getSubList() has been removed");Ext.deprecateProperty(this,"clearSelectionDelay",null,"Ext.dataview.NestedList.clearSelectionDelay has been removed")});
Ext.define("Ext.dataview.element.List",{extend:Ext.dataview.element.Container,updateBaseCls:function(a){this.itemClsShortCache=a+"-item";this.headerClsShortCache=a+"-header";this.headerClsCache="."+this.headerClsShortCache;this.headerItemClsShortCache=a+"-header-item";this.footerClsShortCache=a+"-footer-item";this.footerClsCache="."+this.footerClsShortCache;this.labelClsShortCache=a+"-item-label";this.labelClsCache="."+this.labelClsShortCache;this.disclosureClsShortCache=a+"-disclosure";this.disclosureClsCache=
"."+this.disclosureClsShortCache;this.iconClsShortCache=a+"-icon";this.iconClsCache="."+this.iconClsShortCache;this.callParent(arguments)},hiddenDisplayCache:Ext.baseCSSPrefix+"hidden-display",getItemElementConfig:function(a,b){var c=this.dataview,d=c.getItemCls(),e=this.itemClsShortCache;d&&(e+=" "+d);d={cls:e,children:[{cls:this.labelClsShortCache,html:c.getItemTpl().apply(b)}]};c.getIcon()&&(e=b.iconSrc,d.children.push({cls:this.iconClsShortCache,style:"background-image: "+e?'url("'+newSrc+'")':
""}));c.getOnItemDisclosure()&&d.children.push({cls:this.disclosureClsShortCache+" "+(!1===b[c.getDisclosureProperty()]?this.hiddenDisplayCache:"")});return d},updateListItem:function(a,b){var c=this.dataview,d=Ext.fly(b),e=d.down(this.labelClsCache,!0),f=c.prepareData(a.getData(!0),c.getStore().indexOf(a),a),g=c.getDisclosureProperty(),h=f&&f.hasOwnProperty(g),j=f&&f.hasOwnProperty("iconSrc");e.innerHTML=c.getItemTpl().apply(f);h&&(e=d.down(this.disclosureClsCache),e[!1===f[g]?"addCls":"removeCls"](this.hiddenDisplayCache));
c.getIcon()&&(c=d.down(this.iconClsCache,!0),c.style.backgroundImage=j?'url("'+j+'")':"")},doRemoveHeaders:function(){for(var a=this.headerItemClsShortCache,b=this.element.query(this.headerClsCache),c=b.length,d=0,e;d<c;d++)e=b[d],Ext.fly(e.parentNode).removeCls(a),Ext.get(e).destroy()},doRemoveFooterCls:function(){for(var a=this.footerClsShortCache,b=this.element.query(this.footerClsCache),c=b.length,d=0;d<c;d++)Ext.fly(b[d]).removeCls(a)},doAddHeader:function(a,b){a=Ext.fly(a);b&&a.insertFirst(Ext.Element.create({cls:this.headerClsShortCache,
html:b}));a.addCls(this.headerItemClsShortCache)},destroy:function(){this.doRemoveHeaders();this.callParent()}});Ext.define("TMChunkCompile.view.CustomComponent",{extend:Ext.Component,xtype:"customcomponent",config:{html:"Hello! This view was loaded dynamically!"}});Ext.define("TMChunkCompile.view.Page2",{extend:Ext.Container,xtype:"page2",config:{layout:"vbox",items:[{xtype:"customcomponent"},{xtype:"list",flex:1,itemTpl:"{title}",data:[{title:"Item 1"},{title:"Item 2"},{title:"Item 3"},{title:"Item 4"}]}]}});